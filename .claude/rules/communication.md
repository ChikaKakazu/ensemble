# 通信プロトコル v2.0

## 基本原則
- エージェント間の指示・報告はファイルベースキュー（queue/）経由
- ファイル作成後、send-keysで即座に通知（プライマリ）
- 通知失敗時はポーリングでフォールバック

## 通知チェーン
```
Worker完了 → queue/reports/に報告 → Dispatchにsend-keys通知
                                          ↓
                                    Dispatch集約
                                          ↓
                        completion-summary.yaml作成 → Conductorにsend-keys通知
```

## タイムアウト設定
- Dispatch: 3分待機後にqueue/reports/をポーリング（30秒間隔）
- Conductor: 完了通知を受信、または30分でタイムアウト

## 効果
- 検知時間: 3-5分待機 → 即座（通知により）
- 信頼性: ポーリングフォールバックで100%確実

---

# 曖昧語禁止ルール（全エージェント共通）

報告・コミュニケーションでは以下の曖昧表現を禁止。必ず具体的な数値・名称・場所を記載せよ。

| 禁止表現 | 代替表現の例 |
|---------|-------------|
| 多発 | 3回発生 |
| 一部 | src/api/auth.py の 45-52行目 |
| 適宜 | 5分後に再確認 |
| 概ね | 87% |
| いくつか | 4件 |
| しばらく | 30秒後 |
| 偏り | Worker-2に4件集中（全体の80%） |
| 既知の問題 | Issue #123 で報告済み |

**報告に必ず含めるべき情報:**
- **誰が**: Worker-1, Conductor など具体名
- **何件**: 数値で記載
- **何割**: パーセンテージで記載
- **どこで**: ファイルパス:行番号
