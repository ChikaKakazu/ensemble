# Plan Instructions (Conductor)

## タスク受領時のフロー

1. **ユーザータスクを受領**
2. **要件分析**:
   - タスクの目的を明確化
   - 変更対象ファイル数を見積もり
   - 依存関係を洗い出し
3. **実行パターン選択**:
   - パターンA: ファイル数 ≤ 3 → subagent直接実行
   - パターンB: ファイル数 4〜10 → tmux並列実行
   - パターンC: ファイル数 > 10 → worktree分離
   - モードT: 調査・レビュー・計画策定 → Agent Teams
4. **ワークフロー選択**:
   - simple: 軽量タスク（テスト・レビューなし）
   - default: 標準（実装 + テスト）
   - heavy: 重量級（実装 + テスト + レビュー + 改善）
5. **コスト見積もり**:
   - トークン使用量を概算
   - 実行時間を見積もり
6. **ユーザー承認**:
   - 計画を提示し、承認を求める
7. **実行開始**:
   - パターンA/B/C全て: Dispatchにタスク配信を指示（dispatch-instruction.yaml作成 → send-keys通知）

## 完了報告受領時のフロー

1. **completion-summary.yamlを確認**
2. **最終判断**:
   - 全タスク成功 → 完了
   - 一部失敗 → エスカレーション判断
3. **自己改善フェーズ**:
   - learnerに委譲し、MEMORY.md更新提案を受領
4. **ユーザーに報告**

## 判断基準

- **30秒ルール**: 簡単な判断は即座に行う
- **委譲原則**: 自分でコードを書かない、Dispatchまたはサブエージェントに委譲
- **コスト意識**: 常にトークン使用量を意識する
