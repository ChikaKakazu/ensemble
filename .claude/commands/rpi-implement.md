# RPI Implement - 計画に基づく実装フェーズ

## 目的
Plan フェーズで策定した計画に基づいて、実装を実行する。

## 使用方法
```
/rpi-implement
```

## 前提条件
- `/rpi-plan` が完了していること
- `rpi/plan-{タスク名}.md` が存在すること

## 処理フロー

1. **Plan結果の読み込み**
   - 最新の plan ファイルを特定
   - タスク分解・実装順序を確認

2. **実装戦略の決定**
   - タスク数・並列性から適切なワークフローを選択
     - 1-2タスク: simple workflow（subagent直接実行）
     - 3-5タスク（並列可能）: parallel workflow（tmux多ペイン）
     - 6タスク以上: worktree workflow（git worktree分離）

3. **実装実行**
   - `/go` コマンド相当の処理を開始
   - Plan に従ってサブタスクを順次/並列実行
   - 各サブタスクの完了確認

4. **テスト実行**
   - Plan のテスト計画に従ってテスト実行
   - カバレッジ確認（80%以上）
   - テスト失敗時は実装を修正

5. **レビュー**
   - コードレビュー（code-reviewer agent）
   - セキュリティレビュー（security-reviewer agent）
   - CRITICAL/HIGH 問題は必ず修正

6. **結果の記録**
   - 実装内容のサマリー
   - 変更ファイル一覧
   - テスト結果
   - レビュー結果
   - 発生した問題と対処

## 出力先
`rpi/implement-{タスク名}.md` に実装結果を保存

## 出力フォーマット例

```markdown
# Implement: {タスク名}

## 実装サマリー
- 実装方式: [simple / parallel / worktree]
- 実装期間: YYYY-MM-DD HH:MM 〜 YYYY-MM-DD HH:MM
- 総工数: N時間（見積もり: M時間）

## 変更ファイル
- `path/to/file1.py`: 関数XXX追加（L10-50）
- `path/to/file2.py`: クラスYYY修正（L100-120）
- ...

## テスト結果
### Unit テスト
- 実行: N件
- 成功: N件
- 失敗: 0件
- カバレッジ: X%

### Integration テスト
- ...

### E2E テスト
- ...

## レビュー結果
### コードレビュー
- CRITICAL: 0件
- HIGH: 0件
- MEDIUM: N件（修正済み: M件）
- LOW: K件

### セキュリティレビュー
- 脆弱性: 0件
- 警告: N件（対処済み: M件）

## 発生した問題と対処
| 問題 | 重要度 | 対処 | 結果 |
|------|--------|------|------|
| ... | HIGH | ... | 解決 |
| ... | MEDIUM | ... | 解決 |

## Plan からの変更点
- 当初見積もり: M時間 → 実績: N時間（差分: +X時間）
- 理由: ...

## 次のステップ
- コミット・プッシュ
- PR作成（必要に応じて）
- ドキュメント更新
```

## 注意事項
- Plan に従って実装する（逸脱する場合は理由を記録）
- テストは必ず実行し、80%以上のカバレッジを確保
- レビューでの指摘は必ず対処
- 実装結果は必ずファイルに記録（振り返り・改善のため）
- 工数の見積もりと実績の差分を記録（今後の見積もり精度向上のため）
